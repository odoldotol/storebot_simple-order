외부서비스(카카오페이) 정합성
  tx 범위 최소화
  후보정(order, stream)?
  이벤트기반처리 - 결제승인 스트림?



3가지 고려할 상태가 있음.

고객이 주문세션 구성하는 상태
결제를 진행하는 상태 (주문서 세션이 수정될 여지, 결제가 도중에 실패할 여지)
결제완료시 주문서 저장하고 스트림에 추가하기 (결제완료 후 나머지 작업이 실패할 여지)




=> 
order_id 생성 주체는 일단 DB 로 하자 -> 결제완료 전 미리 order 레코드 생성해야함 (오버헤드)
결제 완료를 메세지스트림에 넣어서 이벤트기반으로 비동기로 처리, 결제승인 메세지 처리를 확실히 하는것으로 일관성

자세한 내용은 Server 문서에서