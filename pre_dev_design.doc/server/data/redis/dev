node-redis vs ioredis

---

레디스 운영


                       죽으면 안돌아감          죽어도 돌아감
복구 100% 해야함             1등급                  x
복구 100% 안해도 됨           2등급                3등급



1 등급 messageStream
2 등급 session, state, geo ...
3 등급 cache





message 서버: 1
general 서버 2, 3

이렇게 두 서버 운영하던가

메모리 압박 심하면 전부 한 서버에 운영하자

---


내구성

=>
0. 스냅숏, everySec AOF - AOF 에 버그 있을수 있어서 스냅숏 병행하는것을 권장. (Default)
1. 시스템에서부터 레디스의 사망에 최대한 면역이 되도록 디자인하기 (특히 주문결제부분)
2. 잘 디자인 된 시스템을 바탕으로 애플리케이션단에서 레디스 사망에 대한 복구 로직을 촘촘히 잘 준비해두기
3. Memory-Policy 등 설정들 매우 꼼꼼히 검토
4. 레디스 레플리케이션 (비동기/동기)
5. 메시지부분을 카프카로



Redis Functions 사용 제한
- 각 스크립트는 하나의 엔티티만 다룰 것.

